(this["webpackJsonpiit-news"]=this["webpackJsonpiit-news"]||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=(n(155),n(20)),i=(n(156),n(5)),l=function(e){var t=e.inputHandler,n=e.userLogin;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{children:[Object(i.jsx)("h3",{children:"Sign In"}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Email address"}),Object(i.jsx)("input",{type:"email",name:"email",onChange:t,className:"form-control",placeholder:"Enter email"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Password"}),Object(i.jsx)("input",{type:"password",name:"password",onChange:t,className:"form-control",placeholder:"Enter password"})]}),Object(i.jsx)("div",{className:"form-group",children:Object(i.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(i.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(i.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(i.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:n,children:"Submit"}),Object(i.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(i.jsx)("a",{href:"#",children:"password?"})]}),Object(i.jsxs)("p",{className:"forgot-password text-right",children:["New here! ",Object(i.jsx)("a",{href:"/signup",children:"Create an account?"})]})]})})},u=function(e){var t=e.userSignUp,n=e.inputHandler;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{children:[Object(i.jsx)("h3",{children:"Sign Up"}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"First name"}),Object(i.jsx)("input",{type:"text",name:"name",onChange:n,className:"form-control",placeholder:"User Name"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Email address"}),Object(i.jsx)("input",{type:"email",name:"email",onChange:n,className:"form-control",placeholder:"Enter email"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Password"}),Object(i.jsx)("input",{type:"password",name:"password",onChange:n,className:"form-control",placeholder:"Enter password"})]}),Object(i.jsx)("button",{onClick:t,type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),Object(i.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(i.jsx)("a",{href:"/intern-task",children:"sign in?"})]})]})})},j=(n(158),n(262)),h=n(23),d=n.n(h),p=n(35),b=n(25),m=function(){var e=Object(o.f)(),t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(b.a)(s,2),l=i[0],u=i[1],j=Object(a.useState)(""),h=Object(b.a)(j,2),m=h[0],f=h[1],O=Object(a.useState)(""),g=Object(b.a)(O,2),x=g[0],v=g[1],w=Object(a.useState)(!1),k=Object(b.a)(w,2),y=k[0],C=k[1],N=Object(a.useState)([]),S=Object(b.a)(N,2),P=S[0],D=S[1],I=function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),e.push("/intern-task");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/createblog",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:m,image:l,content:x})}).then((function(e){if(console.log(e),window.location.reload(),200!==e.status&&201!==e.status)throw new Error("Creating or eidting blog failed!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/myblogs",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){D(e.blogs)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{openCreateDialog:function(){c(!r)},show:r,createPost:T,inputChange:function(e){var t=e.target.name,n=e.target.value;switch(t){case"url":u(n);break;case"title":f(n);break;case"content":v(n);break;default:console.log("wrong input")}},image:l,content:x,title:m,handleTabChange:function(){},showDash:y,closeDash:function(){C(!y),A()},myBlogs:P,logout:I}},f=n(265),O=n(63),g=n(263),x=n(264),v=n(145),w=n.n(v),k=(n(87),function(e){var t=e.show,n=e.closeDialog,a=e.createPost,r=e.inputChange,c=e.image,s=e.content,o=e.title;return Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{title:"Title",visible:t,width:"40vw",onCancel:n,footer:[Object(i.jsx)(O.a,{children:"Cancel"}),Object(i.jsx)(O.a,{onClick:a,children:"Create"})],children:Object(i.jsxs)("div",{className:"dialogbox",children:[Object(i.jsx)(g.a,{width:"100%",height:"300px",src:""===c?"https://apps4rent.com/support/wp-content/plugins/accelerated-mobile-pages/images/SD-default-image.png":c}),Object(i.jsx)(x.a,{onChange:r,value:c,name:"url",style:{marginTop:"8px"},size:"large",placeholder:"Url for image"}),Object(i.jsx)(x.a,{onChange:r,value:o,name:"title",style:{margin:"8px 0"},size:"large",placeholder:"Title"}),Object(i.jsx)(w.a,{onChange:r,value:s,name:"content",placeholder:"Content...",allowClear:!0})]})})})});function y(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();switch(a){case 1:return"Jan "+n+", "+r;case 2:return"Fab "+n+", "+r;case 3:return"March "+n+", "+r;case 4:return"April "+n+", "+r;case 5:return"May "+n+", "+r;case 6:return"June "+n+", "+r;case 7:return"July "+n+", "+r;case 8:return"Aug "+n+", "+r;case 9:return"Sep "+n+", "+r;case 10:return"Oct "+n+", "+r;case 11:return"Nov "+n+", "+r;case 12:return"Dec "+n+", "+r;default:return"Date"}}var C=n(146),N=n.n(C),S=function(e){var t=Object(a.useState)(null),n=Object(b.a)(t,2),r=n[0],c=n[1];return{editPost:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePost:function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("deleting post",e),fetch("https://tranquil-meadow-31122.herokuapp.com/me/blog/delete",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({blogId:e})}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Creating or eidting blog failed!");return e.json()})).then((function(e){c(e),window.location.reload()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),deletedPost:r}},P=function(e){var t=e.item,n=t._id,a=t.title,r=t.createdAt,c=S(n),s=(c.editPost,c.deletePost);return Object(i.jsxs)("div",{className:"MyItem",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:Object(i.jsx)("span",{children:a})}),Object(i.jsx)("p",{children:y(r)})]}),Object(i.jsx)("div",{className:"Actions",children:Object(i.jsx)(N.a,{onClick:s})})]})},D=function(e){var t=e.show,n=e.closeDialog,a=e.postList;return Object(i.jsx)("div",{children:Object(i.jsx)(f.a,{title:"Title",visible:t,width:"40vw",onCancel:n,onOk:n,children:Object(i.jsxs)("div",{className:"DashPosts",children:[Object(i.jsx)("h4",{children:"My posts"}),Object(i.jsx)("div",{className:"MyList",children:0!==a.length&&a.map((function(e){return Object(i.jsx)(P,{item:e},e._id)}))})]})})})},I=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),s=Object(b.a)(c,2),o=s[0],i=s[1],l=Object(a.useState)([]),u=Object(b.a)(l,2),j=u[0],h=u[1];Object(a.useEffect)((function(){m(),f()}),[]);var m=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/feed/blogs",{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:{page:o}}).then((function(e){return e.json()})).then((function(e){r(e.blogs),i(o+1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://newsapi.org/v2/everything?q=tesla&from=2021-02-26&sortBy=publishedAt&apiKey=eb76b7f40b8c4633b1b123f7bff7dc12",{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),h(e.articles)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{postList:n,news:j}},T=function(e){var t=e.item,n=e.value,a=Object(o.f)(),r=t.preview,c=t.title,s=t.content,l=t.createdAt,u=t.creator,j=t._id,h=t.urlToImage,d=t.description,p=t.publishedAt,b=t.author;return Object(i.jsxs)("div",{className:"PostItem",children:[Object(i.jsx)("img",{onClick:function(){a.push({pathname:"/post/"+j})},src:"P"===n?r:h,alt:"blog post"}),Object(i.jsxs)("div",{className:"PostContent",children:[Object(i.jsx)("h5",{className:"title",children:c}),Object(i.jsx)("p",{className:"content",children:"P"===n?s:d})]}),Object(i.jsxs)("div",{className:"PostMetadata",children:[Object(i.jsxs)("p",{children:["by Id ",Object(i.jsx)("span",{children:"P"===n?u:b})]}),Object(i.jsx)("p",{children:y("P"===n?l:p)})]})]})},A=function(){var e=I().postList;return Object(i.jsx)("div",{className:"Home",children:0!==e.length&&e.map((function(e){return Object(i.jsx)(T,{value:"P",item:e},e._id)}))})},E=n(259),B=n(267),F=n(260),L=n(261),U=n(266),q=Object(E.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"left"},options:{display:"flex",alignItems:"center",width:"400px",justifyContent:"space-evenly"}}})),J=function(e){var t=e.openCreateDialog,n=e.openDashDialog,a=e.logout,c=q(),s=r.a.useState(null),o=Object(b.a)(s,2);o[0],o[1];return Object(i.jsx)("div",{children:Object(i.jsx)(B.a,{style:{background:"white"},position:"static",children:Object(i.jsxs)(F.a,{children:[Object(i.jsx)(L.a,{variant:"h6",className:c.title,children:"IITB News"}),Object(i.jsx)("div",{children:Object(i.jsxs)("div",{className:c.options,children:[Object(i.jsx)(U.a,{style:{background:"#1C8EF9"},onClick:t,children:"Create Post"}),Object(i.jsx)(U.a,{style:{background:"#1C8EF9"},onClick:n,children:"Dashboard"}),Object(i.jsx)(U.a,{style:{background:"#1C8EF9"},onClick:a,children:"Logout"})]})})]})})})},z=function(){var e=I().news;return Object(i.jsx)("div",{className:"Home",children:0!==e.length&&e.map((function(e){return Object(i.jsx)(T,{value:"N",item:e},e.description)}))})},H=j.a.TabPane,M=function(){var e=m(),t=e.openCreateDialog,n=e.show,a=e.createPost,r=e.inputChange,c=e.image,s=e.content,o=e.title,l=e.handleTabChange,u=e.showDash,h=e.closeDash,d=e.myBlogs,p=e.logout;return Object(i.jsxs)("div",{children:[Object(i.jsx)(J,{logout:p,openCreateDialog:t,openDashDialog:h}),Object(i.jsx)(k,{image:c,title:o,content:s,createPost:a,show:n,closeDialog:t,inputChange:r}),Object(i.jsx)(D,{postList:d,show:u,closeDialog:h}),Object(i.jsxs)(j.a,{style:{background:"white",padding:"0 1rem"},defaultActiveKey:"1",onChange:l,children:[Object(i.jsx)(H,{tab:"All Posts",children:Object(i.jsx)(A,{})},"1"),Object(i.jsx)(H,{tab:"News",children:Object(i.jsx)(z,{})},"2")]})]})},G=function(){var e=Object(o.f)();Object(a.useEffect)((function(){w()}),[]);var t=Object(a.useState)(""),n=Object(b.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(b.a)(s,2),l=i[0],u=i[1],j=Object(a.useState)(""),h=Object(b.a)(j,2),m=h[0],f=h[1],O=Object(a.useState)(!1),g=Object(b.a)(O,2),x=g[0],v=g[1],w=function(){var t=Object(p.a)(d.a.mark((function t(){var n,a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://tranquil-meadow-31122.herokuapp.com/me",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,(r=a.user)&&(v(!0),e.push({pathname:"/user/"+r._id}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{isUserAuth:w,userLogin:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://tranquil-meadow-31122.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:l})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,console.log(a),localStorage.setItem("token",a.token),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),inputHandler:function(e){var t=e.target.name,n=e.target.value;"name"===t?f(n):"email"===t?c(n):u(n)},isLoggedIn:x,userSignUp:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://tranquil-meadow-31122.herokuapp.com/auth/signup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,email:r,password:l})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,localStorage.setItem("token",a.token);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},_=function(e){var t=e.postId,n=Object(a.useState)(null),r=Object(b.a)(n,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){fetch("https://tranquil-meadow-31122.herokuapp.com/feed/page/".concat(t),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch posts.");return e.json()})).then((function(e){s(e.blog)})).catch((function(e){console.log(e)}))}),[]),{blog:c}},K=function(e){var t=e.match,n=_(t.params).blog;return Object(i.jsxs)("div",{className:"PostPage",children:[Object(i.jsx)("img",{src:n&&n.preview,alt:n&&n.title}),Object(i.jsxs)("p",{children:["Date: ",Object(i.jsx)("span",{children:y(n&&n.createdAt)})]}),Object(i.jsx)("h1",{children:n&&n.title}),Object(i.jsx)("p",{children:n&&n.content})]})};var R=function(){Object(o.f)();var e=G(),t=(e.isUserAuth,e.userLogin),n=e.inputHandler,a=e.userSignUp;return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(o.c,{children:[Object(i.jsx)(o.a,{exact:!0,path:"/user/:userId",children:Object(i.jsx)(M,{})}),Object(i.jsx)(o.a,{path:"/post/:postId",component:K}),Object(i.jsxs)("div",{className:"auth-wrapper",children:[Object(i.jsx)("h1",{children:"IIT News"}),Object(i.jsxs)("div",{className:"auth-inner",children:[Object(i.jsx)(o.a,{path:"/intern-task",exact:!0,children:Object(i.jsx)(l,{inputHandler:n,userLogin:t})}),Object(i.jsx)(o.a,{path:"intern-task/signup",children:Object(i.jsx)(u,{inputHandler:n,userSignUp:a})})]})]})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Q=n(61);n(228);s.a.render(Object(i.jsx)(Q.a,{children:Object(i.jsx)(R,{})}),document.getElementById("root")),Y()},87:function(e,t,n){}},[[229,1,2]]]);
//# sourceMappingURL=main.5a61f573.chunk.js.map