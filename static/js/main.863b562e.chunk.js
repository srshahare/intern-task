(this["webpackJsonpiit-news"]=this["webpackJsonpiit-news"]||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),s=n.n(c),o=(n(155),n(20)),i=(n(156),n(46)),l=n(5),u=function(e){var t=e.inputHandler,n=e.userLogin;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{children:[Object(l.jsx)("h3",{children:"Sign In"}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Email address"}),Object(l.jsx)("input",{type:"email",name:"email",onChange:t,className:"form-control",placeholder:"Enter email"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",onChange:t,className:"form-control",placeholder:"Enter password"})]}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(l.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(l.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(l.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",onClick:n,children:"Submit"}),Object(l.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(l.jsx)("a",{href:"#",children:"password?"})]}),Object(l.jsxs)("p",{className:"forgot-password text-right",children:["New here! ",Object(l.jsx)(i.b,{to:"/intern-task/signup",children:"Create an account?"})]})]})})},j=function(e){var t=e.userSignUp,n=e.inputHandler;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{children:[Object(l.jsx)("h3",{children:"Sign Up"}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"First name"}),Object(l.jsx)("input",{type:"text",name:"name",onChange:n,className:"form-control",placeholder:"User Name"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Email address"}),Object(l.jsx)("input",{type:"email",name:"email",onChange:n,className:"form-control",placeholder:"Enter email"})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",onChange:n,className:"form-control",placeholder:"Enter password"})]}),Object(l.jsx)("button",{onClick:t,type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"}),Object(l.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(l.jsx)(i.b,{to:"/intern-task",children:"sign in?"})]})]})})},h=(n(162),n(262)),d=n(23),p=n.n(d),b=n(35),m=n(25),f=function(){var e=Object(o.f)(),t=Object(a.useState)(!1),n=Object(m.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(m.a)(s,2),l=i[0],u=i[1],j=Object(a.useState)(""),h=Object(m.a)(j,2),d=h[0],f=h[1],O=Object(a.useState)(""),g=Object(m.a)(O,2),x=g[0],v=g[1],w=Object(a.useState)(!1),k=Object(m.a)(w,2),y=k[0],C=k[1],N=Object(a.useState)([]),S=Object(m.a)(N,2),P=S[0],D=S[1],I=function(){var t=Object(b.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),e.push("/intern-task");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/createblog",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({title:d,image:l,content:x})}).then((function(e){if(console.log(e),window.location.reload(),200!==e.status&&201!==e.status)throw new Error("Creating or eidting blog failed!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/myblogs",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return e.json()})).then((function(e){D(e.blogs)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{openCreateDialog:function(){c(!r)},show:r,createPost:T,inputChange:function(e){var t=e.target.name,n=e.target.value;switch(t){case"url":u(n);break;case"title":f(n);break;case"content":v(n);break;default:console.log("wrong input")}},image:l,content:x,title:d,handleTabChange:function(){},showDash:y,closeDash:function(){C(!y),A()},myBlogs:P,logout:I}},O=n(265),g=n(63),x=n(263),v=n(264),w=n(145),k=n.n(w),y=(n(87),function(e){var t=e.show,n=e.closeDialog,a=e.createPost,r=e.inputChange,c=e.image,s=e.content,o=e.title;return Object(l.jsx)("div",{children:Object(l.jsx)(O.a,{title:"Title",visible:t,width:"40vw",onCancel:n,footer:[Object(l.jsx)(g.a,{children:"Cancel"}),Object(l.jsx)(g.a,{onClick:a,children:"Create"})],children:Object(l.jsxs)("div",{className:"dialogbox",children:[Object(l.jsx)(x.a,{width:"100%",height:"300px",src:""===c?"https://apps4rent.com/support/wp-content/plugins/accelerated-mobile-pages/images/SD-default-image.png":c}),Object(l.jsx)(v.a,{onChange:r,value:c,name:"url",style:{marginTop:"8px"},size:"large",placeholder:"Url for image"}),Object(l.jsx)(v.a,{onChange:r,value:o,name:"title",style:{margin:"8px 0"},size:"large",placeholder:"Title"}),Object(l.jsx)(k.a,{onChange:r,value:s,name:"content",placeholder:"Content...",allowClear:!0})]})})})});function C(e){var t=new Date(e),n=t.getDate(),a=t.getMonth()+1,r=t.getFullYear();switch(a){case 1:return"Jan "+n+", "+r;case 2:return"Fab "+n+", "+r;case 3:return"March "+n+", "+r;case 4:return"April "+n+", "+r;case 5:return"May "+n+", "+r;case 6:return"June "+n+", "+r;case 7:return"July "+n+", "+r;case 8:return"Aug "+n+", "+r;case 9:return"Sep "+n+", "+r;case 10:return"Oct "+n+", "+r;case 11:return"Nov "+n+", "+r;case 12:return"Dec "+n+", "+r;default:return"Date"}}var N=n(146),S=n.n(N),P=function(e){var t=Object(a.useState)(null),n=Object(m.a)(t,2),r=n[0],c=n[1];return{editPost:function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deletePost:function(){var t=Object(b.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("deleting post",e),fetch("https://tranquil-meadow-31122.herokuapp.com/me/blog/delete",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify({blogId:e})}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Creating or eidting blog failed!");return e.json()})).then((function(e){c(e),window.location.reload()}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),deletedPost:r}},D=function(e){var t=e.item,n=t._id,a=t.title,r=t.createdAt,c=P(n),s=(c.editPost,c.deletePost);return Object(l.jsxs)("div",{className:"MyItem",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{children:Object(l.jsx)("span",{children:a})}),Object(l.jsx)("p",{children:C(r)})]}),Object(l.jsx)("div",{className:"Actions",children:Object(l.jsx)(S.a,{onClick:s})})]})},I=function(e){var t=e.show,n=e.closeDialog,a=e.postList;return Object(l.jsx)("div",{children:Object(l.jsx)(O.a,{title:"Title",visible:t,width:"40vw",onCancel:n,onOk:n,children:Object(l.jsxs)("div",{className:"DashPosts",children:[Object(l.jsx)("h4",{children:"My posts"}),Object(l.jsx)("div",{className:"MyList",children:0!==a.length&&a.map((function(e){return Object(l.jsx)(D,{item:e},e._id)}))})]})})})},T=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),s=Object(m.a)(c,2),o=s[0],i=s[1],l=Object(a.useState)([]),u=Object(m.a)(l,2),j=u[0],h=u[1];Object(a.useEffect)((function(){d(),f()}),[]);var d=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://tranquil-meadow-31122.herokuapp.com/feed/blogs",{headers:{Authorization:"Bearer "+localStorage.getItem("token")},params:{page:o}}).then((function(e){return e.json()})).then((function(e){r(e.blogs),i(o+1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://newsapi.org/v2/everything?q=tesla&from=2021-02-26&sortBy=publishedAt&apiKey=eb76b7f40b8c4633b1b123f7bff7dc12",{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log(e),h(e.articles)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{postList:n,news:j}},A=function(e){var t=e.item,n=e.value,a=Object(o.f)(),r=t.preview,c=t.title,s=t.content,i=t.createdAt,u=t.creator,j=t._id,h=t.urlToImage,d=t.description,p=t.publishedAt,b=t.author;return Object(l.jsxs)("div",{className:"PostItem",children:[Object(l.jsx)("img",{onClick:function(){a.push({pathname:"/post/"+j})},src:"P"===n?r:h,alt:"blog post"}),Object(l.jsxs)("div",{className:"PostContent",children:[Object(l.jsx)("h5",{className:"title",children:c}),Object(l.jsx)("p",{className:"content",children:"P"===n?s:d})]}),Object(l.jsxs)("div",{className:"PostMetadata",children:[Object(l.jsxs)("p",{children:["by Id ",Object(l.jsx)("span",{children:"P"===n?u:b})]}),Object(l.jsx)("p",{children:C("P"===n?i:p)})]})]})},E=function(){var e=T().postList;return Object(l.jsx)("div",{className:"Home",children:0!==e.length&&e.map((function(e){return Object(l.jsx)(A,{value:"P",item:e},e._id)}))})},B=n(259),F=n(267),L=n(260),U=n(261),q=n(266),J=Object(B.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"left"},options:{display:"flex",alignItems:"center",width:"400px",justifyContent:"space-evenly"}}})),z=function(e){var t=e.openCreateDialog,n=e.openDashDialog,a=e.logout,c=J(),s=r.a.useState(null),o=Object(m.a)(s,2);o[0],o[1];return Object(l.jsx)("div",{children:Object(l.jsx)(F.a,{style:{background:"white"},position:"static",children:Object(l.jsxs)(L.a,{children:[Object(l.jsx)(U.a,{variant:"h6",className:c.title,children:"IITB News"}),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:c.options,children:[Object(l.jsx)(q.a,{style:{background:"#1C8EF9"},onClick:t,children:"Create Post"}),Object(l.jsx)(q.a,{style:{background:"#1C8EF9"},onClick:n,children:"Dashboard"}),Object(l.jsx)(q.a,{style:{background:"#1C8EF9"},onClick:a,children:"Logout"})]})})]})})})},H=function(){var e=T().news;return Object(l.jsx)("div",{className:"Home",children:0!==e.length&&e.map((function(e){return Object(l.jsx)(A,{value:"N",item:e},e.description)}))})},M=h.a.TabPane,G=function(){var e=f(),t=e.openCreateDialog,n=e.show,a=e.createPost,r=e.inputChange,c=e.image,s=e.content,o=e.title,i=e.handleTabChange,u=e.showDash,j=e.closeDash,d=e.myBlogs,p=e.logout;return Object(l.jsxs)("div",{children:[Object(l.jsx)(z,{logout:p,openCreateDialog:t,openDashDialog:j}),Object(l.jsx)(y,{image:c,title:o,content:s,createPost:a,show:n,closeDialog:t,inputChange:r}),Object(l.jsx)(I,{postList:d,show:u,closeDialog:j}),Object(l.jsxs)(h.a,{style:{background:"white",padding:"0 1rem"},defaultActiveKey:"1",onChange:i,children:[Object(l.jsx)(M,{tab:"All Posts",children:Object(l.jsx)(E,{})},"1"),Object(l.jsx)(M,{tab:"News",children:Object(l.jsx)(H,{})},"2")]})]})},_=function(){var e=Object(o.f)();Object(a.useEffect)((function(){w()}),[]);var t=Object(a.useState)(""),n=Object(m.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),i=Object(m.a)(s,2),l=i[0],u=i[1],j=Object(a.useState)(""),h=Object(m.a)(j,2),d=h[0],f=h[1],O=Object(a.useState)(!1),g=Object(m.a)(O,2),x=g[0],v=g[1],w=function(){var t=Object(b.a)(p.a.mark((function t(){var n,a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://tranquil-meadow-31122.herokuapp.com/me",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,(r=a.user)&&(v(!0),e.push({pathname:"intern-task/user/"+r._id}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{isUserAuth:w,userLogin:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://tranquil-meadow-31122.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:l})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,console.log(a),localStorage.setItem("token",a.token),window.location.reload();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),inputHandler:function(e){var t=e.target.name,n=e.target.value;"name"===t?f(n):"email"===t?c(n):u(n)},isLoggedIn:x,userSignUp:function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://tranquil-meadow-31122.herokuapp.com/auth/signup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:d,email:r,password:l})});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,localStorage.setItem("token",a.token);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},K=function(e){var t=e.postId,n=Object(a.useState)(null),r=Object(m.a)(n,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){fetch("https://tranquil-meadow-31122.herokuapp.com/feed/page/".concat(t),{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){if(200!==e.status)throw new Error("Failed to fetch posts.");return e.json()})).then((function(e){s(e.blog)})).catch((function(e){console.log(e)}))}),[]),{blog:c}},R=function(e){var t=e.match,n=K(t.params).blog;return Object(l.jsxs)("div",{className:"PostPage",children:[Object(l.jsx)("img",{src:n&&n.preview,alt:n&&n.title}),Object(l.jsxs)("p",{children:["Date: ",Object(l.jsx)("span",{children:C(n&&n.createdAt)})]}),Object(l.jsx)("h1",{children:n&&n.title}),Object(l.jsx)("p",{children:n&&n.content})]})};var Y=function(){Object(o.f)();var e=_(),t=(e.isUserAuth,e.userLogin),n=e.inputHandler,a=e.userSignUp;return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{exact:!0,path:"intern-task/user/:userId",children:Object(l.jsx)(G,{})}),Object(l.jsx)(o.a,{path:"/post/:postId",component:R}),Object(l.jsxs)("div",{className:"auth-wrapper",children:[Object(l.jsx)("h1",{children:"IIT News"}),Object(l.jsxs)("div",{className:"auth-inner",children:[Object(l.jsx)(o.a,{path:"/intern-task",exact:!0,children:Object(l.jsx)(u,{inputHandler:n,userLogin:t})}),Object(l.jsx)(o.a,{path:"intern-task/signup",children:Object(l.jsx)(j,{inputHandler:n,userSignUp:a})})]})]})]})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,269)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(228);s.a.render(Object(l.jsx)(i.a,{children:Object(l.jsx)(Y,{})}),document.getElementById("root")),Q()},87:function(e,t,n){}},[[229,1,2]]]);
//# sourceMappingURL=main.863b562e.chunk.js.map